/*
  Life Cycle Companion - Styles
  Light/Dark theme with CSS variables, responsive layout, a11y-friendly focus states.
*/
:root {
  --bg: #0b0c0f;
  --panel: #12141a;
  --panel-2: #1a1d25;
  --text: #e6e9f0;
  --muted: #a5adbf;
  --primary: #7aa2f7;
  --primary-contrast: #0b1225;
  --accent: #7dcfff;
  --positive: #78dba9;
  --negative: #f7768e;
  --warning: #e0af68;
  --border: #2b3040;
  --shadow: 0 6px 16px rgba(0,0,0,0.2);
}

/* Light theme overrides */
body[data-theme="light"] {
  --bg: #f7f8fb;
  --panel: #ffffff;
  --panel-2: #f1f3f9;
  --text: #0b0c0f;
  --muted: #525866;
  --primary: #3056d3;
  --primary-contrast: #ffffff;
  --accent: #0ea5e9;
  --positive: #059669;
  --negative: #dc2626;
  --warning: #b45309;
  --border: #e5e7ef;
  --shadow: 0 4px 14px rgba(0,0,0,0.08);
}

/* Base reset */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
}

img, svg, video { max-width: 100%; display: block; }

h1, h2, h3 { margin: 0 0 8px 0; line-height: 1.25; }
h2 { font-size: 1.25rem; }
h3 { font-size: 1rem; }

small, .small { font-size: 0.875rem; }
.muted { color: var(--muted); }
.align-start { align-self: flex-start; }

.skip-link {
  position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;
}
.skip-link:focus { left: 8px; top: 8px; width: auto; height: auto; padding: 8px 12px; background: var(--primary); color: var(--primary-contrast); border-radius: 8px; }

.app-header {
  position: sticky; top: 0; z-index: 10;
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; background: var(--panel); border-bottom: 1px solid var(--border);
}
.brand { display: flex; align-items: center; gap: 10px; font-weight: 700; }
.logo { font-size: 1.25rem; }
.brand-title { font-size: 1rem; letter-spacing: 0.3px; }

.header-actions { display: flex; align-items: center; gap: 8px; }

.app-nav {
  position: sticky; top: 56px; z-index: 9; display: flex; gap: 8px; overflow-x: auto;
  padding: 8px 12px; background: var(--panel); border-bottom: 1px solid var(--border);
}
.tab {
  appearance: none; border: 1px solid var(--border); background: var(--panel-2); color: var(--text);
  padding: 8px 12px; border-radius: 999px; cursor: pointer; white-space: nowrap;
}
.tab.active { background: var(--primary); color: var(--primary-contrast); border-color: transparent; }

.app-main { max-width: 1100px; margin: 16px auto; padding: 0 16px; }

.section-header { display: flex; align-items: center; gap: 12px; margin: 8px 0 12px; }
.date-pill { padding: 6px 10px; border-radius: 999px; background: var(--panel-2); border: 1px solid var(--border); color: var(--muted); }

.cards { display: grid; grid-template-columns: 1fr; gap: 12px; }
@media (min-width: 900px) { .cards { grid-template-columns: repeat(3, 1fr); } }
.card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; box-shadow: var(--shadow); }
.card-header { display: flex; align-items: center; justify-content: space-between; padding: 12px; border-bottom: 1px solid var(--border); }
.card > *:not(.card-header) { padding: 12px; }

.row { display: flex; gap: 10px; align-items: center; }
.wrap { flex-wrap: wrap; }
.stack { display: grid; gap: 10px; }
.grow { flex: 1 1 auto; }
.spacer { flex: 1; }

input, select, textarea {
  background: var(--panel-2); color: var(--text); border: 1px solid var(--border);
  padding: 8px 10px; border-radius: 10px; outline: none; width: 100%;
}
input:focus, select:focus, textarea:focus { border-color: var(--primary); box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 25%, transparent); }

.btn {
  appearance: none; border: none; background: var(--primary); color: var(--primary-contrast);
  padding: 9px 14px; border-radius: 10px; cursor: pointer; font-weight: 600;
}
.btn:hover { filter: brightness(1.05); }
.btn:active { transform: translateY(1px); }
.btn.danger { background: var(--negative); }
.text-btn { appearance: none; background: transparent; border: none; color: var(--primary); cursor: pointer; }
.icon-btn { appearance: none; background: var(--panel-2); border: 1px solid var(--border); border-radius: 8px; padding: 6px 10px; cursor: pointer; }

.list { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
.list-item { display: flex; align-items: center; gap: 10px; background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 10px; }
.list-item .title { font-weight: 600; }
.list-item .muted { margin-left: auto; }

.badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 999px; background: var(--panel-2); border: 1px solid var(--border); color: var(--muted); }
.badge.high { background: color-mix(in oklab, var(--negative) 20%, transparent); color: var(--negative); }
.badge.medium { background: color-mix(in oklab, var(--warning) 20%, transparent); color: var(--warning); }
.badge.low { background: color-mix(in oklab, var(--positive) 20%, transparent); color: var(--positive); }

.filters { margin: 10px 0; }
.chip { padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); background: var(--panel-2); color: var(--text); cursor: pointer; }
.chip.active { background: var(--primary); color: var(--primary-contrast); border-color: transparent; }

.summary { margin: 12px 0; }
.grid-3 { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 10px; }
.summary-card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 12px; box-shadow: var(--shadow); }
.summary-card .label { color: var(--muted); }
.summary-card .value { font-size: 1.25rem; font-weight: 700; margin-top: 4px; }

.water-controls { display: inline-flex; align-items: center; gap: 10px; }
.count { min-width: 2ch; text-align: center; font-weight: 700; }
.goal { color: var(--muted); }

.mood-picker { display: inline-flex; gap: 8px; }
.mood-btn { font-size: 20px; line-height: 1; background: var(--panel-2); border: 1px solid var(--border); padding: 6px 8px; border-radius: 10px; cursor: pointer; }
.mood-btn[aria-checked="true"] { outline: 3px solid color-mix(in oklab, var(--accent) 60%, transparent); }

.view { display: none; }
.view.active { display: block; }

.app-footer { margin: 24px auto; padding: 16px; text-align: center; color: var(--muted); }

.toast {
  position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%);
  background: var(--panel); color: var(--text); border: 1px solid var(--border); padding: 10px 14px; border-radius: 10px; box-shadow: var(--shadow);
}

/* Utilities */
.row label { display: inline-flex; align-items: center; gap: 8px; }
.row input[type="text"], .row input[type="date"], .row input[type="time"], .row input[type="number"], .row select { width: auto; }
.stack textarea { width: 100%; }

/* Today */
.wellness-today { display: grid; gap: 10px; }

/* Habits */
.habit { display: grid; grid-template-columns: 28px 1fr; gap: 8px; padding: 10px; background: var(--panel); border: 1px solid var(--border); border-radius: 10px; }
.habit .name { font-weight: 600; }
.week { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; }
.day { text-align: center; padding: 6px 0; border-radius: 8px; border: 1px solid var(--border); background: var(--panel-2); font-size: 0.85rem; cursor: pointer; }
.day.done { background: color-mix(in oklab, var(--positive) 20%, transparent); border-color: color-mix(in oklab, var(--positive) 40%, var(--border)); }
.habit-actions { display: flex; align-items: center; gap: 8px; justify-content: flex-end; }

/* Tasks */
.task-title { flex: 1; }
.task-row.done .task-title { text-decoration: line-through; color: var(--muted); }

/* Budget */
.txn { display: grid; grid-template-columns: 1fr auto auto auto; gap: 8px; align-items: center; }
.txn .amount { font-weight: 700; }
.txn.income .amount { color: var(--positive); }
.txn.expense .amount { color: var(--negative); }

/* Journal */
.entry { display: grid; gap: 6px; padding: 10px; border: 1px solid var(--border); border-radius: 10px; background: var(--panel); }
.entry .meta { display: flex; align-items: center; gap: 10px; color: var(--muted); }
.entry .title { font-weight: 700; }

/* Focus */
:where(button, a, input, select, textarea):focus-visible { outline: 3px solid color-mix(in oklab, var(--primary) 60%, transparent); outline-offset: 2px; }
